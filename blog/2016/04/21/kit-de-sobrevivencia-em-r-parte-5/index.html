


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Kit De Sobrevivência Em R - Parte 5: Tipos De Dados E Transformações - Full Join</title>
  <meta name="author" content="Full Join">

  
  <meta name="description" content="Kit De Sobrevivência Em R - Parte 5: Tipos De Dados E Transformações 21/04/2016 7:00 pm | básico, introdução r, r Você já aprendeu como carregar um &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://fulljoin.com.br/blog/2016/04/21/kit-de-sobrevivencia-em-r-parte-5/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Full Join" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-75406624-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Full Join</a></h1>
  
    <h2>Um blog sobre Data Science.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="fulljoin.com.br">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivo</a></li>
  <li><a href="/authors">Sobre</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Kit De Sobrevivência Em R - Parte 5: Tipos De Dados E Transformações</h1>
        
          
    <p class="meta">
    




<time class='entry-date' datetime='2016-04-21T19:00:00-03:00'><span class='date'>21/04/2016</span> <span class='time'>7:00 pm</span></time>
        
        | 

<span class="categories">
  
    <a class='category' href='/blog/categories/basico/'>básico</a>, <a class='category' href='/blog/categories/introducao-r/'>introdução r</a>, <a class='category' href='/blog/categories/r/'>r</a>
  
</span>


      </p>
    
  </header>


<div class="entry-content"><p>Você já aprendeu como carregar um arquivo de dados no R para começar a trabalhar com ele. Agora vamos conhecer o básico necessário para manipular os dados e prepará-los para a análise propriamente dita. Para isso será necessário saber sobre alguns tipos básicos de dados e algumas formas de transformação de dados.</p>

<!-- More -->

<h1 id="porque-transformar-os-dados">Porque transformar os dados?</h1>

<p>Durante o processo de análise de dados é bastante comum precisar de mais informações que não estão explícitas em sua base de dados, ou seja, informações além das que estão disponíveis nas linhas e colunas.</p>

<p>Transformar os dados permite extrair, ajustar e até mesmo criar informações com seus dados, criando novas colunas, novas linhas, ou quem sabe um outro arquivo de dados derivado do original.</p>

<p>Infelizmente, aqui vai uma notícia ruim: não existe padrão algum para transformação de dados, vai depender muito do design dos seus dados, das necessidades da sua análise e da sua criatividade!</p>

<p>A notícia boa é que, quanto mais você conhecer formas de transformar os dados e quanto mais dominar os tipos de dados existentes em R, a tarefa de transformação de dados será mais fácil e até mais divertida.</p>

<h1 id="tipos-de-dados">Tipos de dados</h1>

<p>Existem diversos tipos de dados em R, alguns mais básicos e outros mais complexos (não em termos de dificuldade, e sim de estrutura). Vamos tentar apresentar alguns na prática ao longo do post.</p>

<p>Lembra dos dados utilizados no <a href="/blog/2016/04/12/kit-de-sobrevivencia-em-r-parte-4">último post</a>? Vamos usá-los novamente como exemplo. Lembre-se de informar ao R o local onde o arquivo está para que ele possa ler.</p>

<p>Carregue algum dos arquivos de forma apropriada (todos arquivos tem o mesmo conteúdo). Como exemplo, escolhemos o arquivo com colunas delimitadas por <code>;</code>.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dados</span> <span class="o">&lt;-</span> <span class="n">read.table</span><span class="p">(</span><span class="s1">'desemprego_uf_ponto_virgula.txt'</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">";"</span><span class="p">,</span> <span class="n">dec</span> <span class="o">=</span> <span class="s2">","</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">)</span></code></pre></div>

<p>Esses dados trazem informações trimestrais ao longo dos anos da taxa de desemprego das Unidades da Federação do Brasil.</p>

<p>No post anterior conseguimos dar uma olhada superficial usando <code>head()</code> e <code>tail()</code>. Para começar a transformar os dados precisaremos aprofundar um pouco mais. Usaremos então o <code>class()</code> e o <code>str()</code> para investigar melhor nossos dados.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">class</span><span class="p">(</span><span class="n">dados</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] "data.frame"</code></pre></div>

<p>A função <code>class()</code> recebe como parâmetro uma variável, e como resposta ela apresenta o tipo de dado dessa variável. Temos então um <code>data.frame</code>.</p>

<h3 id="dataframe">Data.frame</h3>

<p>Data frame é um tipo de dado complexo, um dos mais utilizados em R. É nele que você armazena conjuntos de dados estruturados em linhas e colunas. Um data frame possui colunas nomeadas, sendo que todas as colunas possuem a mesma quantidade de linhas.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">str</span><span class="p">(</span><span class="n">dados</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## 'data.frame':	432 obs. of  4 variables:
##  $ Ano            : int  2012 2012 2012 2012 2013 2013 2013 2013 2014 2014 ...
##  $ Trimestre      : Factor w/ 4 levels "abr-mai-jun",..: 2 1 3 4 2 1 3 4 2 1 ...
##  $ UF             : Factor w/ 27 levels "Acre","Alagoas",..: 22 22 22 22 22 22 22 22 22 22 ...
##  $ Taxa_Desemprego: num  8.01 6.22 5.88 5.27 6.11 ...</code></pre></div>

<p>Com a função <code>str()</code> podemos examinar melhor a estrutura do nosso data frame.
Reparem que é um conjunto de dados que possui 4 variáveis (colunas) e 432 observações (linhas). Temos ainda uma listagem com o nome das colunas, o tipo de dado presente em cada coluna e uma pequena amostra dos dados.</p>

<blockquote>
  <p>Matrizes também são objetos de duas dimensões (linhas e colunas). No entanto, diferentemente do data.frame, elas somente aceitam um tipo de dado.</p>
</blockquote>

<h3 id="integer">Integer</h3>

<p>Trata-se de um tipo de dado básico que representa um número inteiro. É tão simples que não há muito o que comentar: 1, 2, 3, 4… até 2147483647. Tente <code>class(dados$Ano)</code> e veja que o ano é um tipo inteiro.</p>

<h3 id="factor">Factor</h3>

<p>É um tipo de dado complexo que representa categorias (levels). Tentando ser o máximo simplista, é uma lista de categorias enumeradas, ou seja, é uma sequência de informações textuais (palavras) representadas por um número. Você vê as categorias e o R “vê” os números que representam essas categorias. Esse tipo é muito útil para modelos estatísticos.</p>

<p>Parece um pouco confuso de entender, mas factor é a forma mais eficiente do R interpretar uma sequência de palavras. Veja o resultado do comando abaixo:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">unique</span><span class="p">(</span><span class="n">dados</span><span class="o">$</span><span class="n">UF</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##  [1] Rondônia            Acre                Amazonas           
##  [4] Roraima             Pará                Amapá              
##  [7] Tocantins           Maranhão            Piauí              
## [10] Ceará               Rio Grande do Norte Paraíba            
## [13] Pernambuco          Alagoas             Sergipe            
## [16] Bahia               Minas Gerais        Espírito Santo     
## [19] Rio de Janeiro      São Paulo           Paraná             
## [22] Santa Catarina      Rio Grande do Sul   Mato Grosso do Sul 
## [25] Mato Grosso         Goiás               Distrito Federal   
## 27 Levels: Acre Alagoas Amapá Amazonas Bahia ... Tocantins</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">unique</span><span class="p">(</span><span class="n">dados</span><span class="o">$</span><span class="n">Trimestre</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] jan-fev-mar abr-mai-jun jul-ago-set out-nov-dez
## Levels: abr-mai-jun jan-fev-mar jul-ago-set out-nov-dez</code></pre></div>

<p>A visualização que o R fornece não ajuda muito, mas repare que cada categoria possui um número. Exemplo: “Rondônia” - 1, “Acre” - 2, “Mato Grosso” - 25, “Distrito Federal” - 27; ou ainda “jan-fev-mar” - 1, “abr-mai-jun” - 2, “jul-ago-set” - 3, “out-nov-dez” - 4.</p>

<p>Então podemos dizer que nossa coluna UF é um factor de 27 levels, e Trimestre é um factor de 4 levels.</p>

<p>Mas o que é esse cifrão <code>$</code> que usamos nos comandos acima? É uma notação do R para quando você quer visualizar ou trabalhar com uma coluna (variável) de um data.frame. Você verá que o <code>$</code> também é utilizado em outros tipos de objetos, como listas. A ideia é acessar uma parte de um objeto.</p>

<p>No caso data.frame, você informa o nome do objeto, o <code>$</code>, e em seguida o nome da coluna que você quer. Experimente: <code>dados$Ano</code>, <code>dados$UF</code>, <code>dados$Trimestre</code> e <code>dados$Taxa_Desemprego</code>. Essa notação é muito importante e você a utilizará bastante.</p>

<p>E o que seria essa função <code>unique()</code>? É uma função básica do R para listar todos os valores de uma variável sem repetição. Olhando todos os dados em <code>dados$UF</code> você vai reparar que os nomes aparecem várias vezes em várias linhas, o <code>unique()</code> lista a ocorrência única de cada nome.</p>

<h3 id="numeric">Numeric</h3>

<p>Continuando a exploração dos tipos, temos o <code>numeric</code> ou <code>num</code>, um tipo básico capaz de representar números decimais. O tipo <code>numeric</code> também consegue representar inteiros. Tente <code>class(dados$Taxa_Desemprego)</code> e repare que é um tipo numérico.</p>

<h1 id="transformaes">Transformações</h1>

<p>Tendo consciência dos tipos de dados que compõem nosso data frame, já é possível começar a imaginar as análises que podem ser feitas.</p>

<p>Vamos supor que surgiu a necessidade de analisarmos os dados de desemprego por semestre. Podemos observar nos dados que temos informações explícitas por trimestre e de certa forma por ano também. Para começarmos os cálculos então seria interessante ter uma variável (coluna) indicando o semestre.</p>

<p>Ora, essa informação já existe no conjunto de dados, afinal, temos trimestres e anos. Porém, não está explícita em nenhuma variável. Então vamos transformar os dados e criar essa variável!</p>

<p>Primeiramente vamos criar a variável. A forma é muito semelhante à criação de uma variável normal, mas vamos usar o <code>$</code> para indicar que estamos criando uma variável dentro do data frame.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dados</span><span class="o">$</span><span class="n">Semestre</span> <span class="o">&lt;-</span> <span class="m">1</span>
<span class="n">head</span><span class="p">(</span><span class="n">dados</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##    Ano   Trimestre       UF Taxa_Desemprego Semestre
## 1 2012 jan-fev-mar Rondônia           8.008        1
## 2 2012 abr-mai-jun Rondônia           6.224        1
## 3 2012 jul-ago-set Rondônia           5.882        1
## 4 2012 out-nov-dez Rondônia           5.274        1</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">tail</span><span class="p">(</span><span class="n">dados</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##      Ano   Trimestre               UF Taxa_Desemprego Semestre
## 429 2015 jan-fev-mar Distrito Federal          10.784        1
## 430 2015 abr-mai-jun Distrito Federal           9.627        1
## 431 2015 jul-ago-set Distrito Federal          10.258        1
## 432 2015 out-nov-dez Distrito Federal           9.707        1</code></pre></div>

<p>Acabamos de criar uma nova coluna e atribuir 1 a todas as linhas dessa coluna. Não é exatamente o que queremos. Queremos atribuir 1 para primeiro semestre e 2 para segundo semestre. Para conseguir isso precisaremos atribuir a variável segundo algumas condições.</p>

<p>Ou seja, quando for trimestre <code>jan-fev-mar</code> ou <code>abr-mai-jun</code> vamos atribuir 1, quando for o trimestre <code>jul-ago-set</code> ou <code>out-nov-dez</code> vamos atribuir 2:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dados</span><span class="o">$</span><span class="n">Semestre</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">Trimestre</span> <span class="o">==</span> <span class="s1">'jan-fev-mar'</span> <span class="o">|</span> <span class="n">dados</span><span class="o">$</span><span class="n">Trimestre</span> <span class="o">==</span> <span class="s1">'abr-mai-jun'</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">1</span>
<span class="n">dados</span><span class="o">$</span><span class="n">Semestre</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">Trimestre</span> <span class="o">==</span> <span class="s1">'jul-ago-set'</span> <span class="o">|</span> <span class="n">dados</span><span class="o">$</span><span class="n">Trimestre</span> <span class="o">==</span> <span class="s1">'out-nov-dez'</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">2</span>
<span class="n">head</span><span class="p">(</span><span class="n">dados</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##    Ano   Trimestre       UF Taxa_Desemprego Semestre
## 1 2012 jan-fev-mar Rondônia           8.008        1
## 2 2012 abr-mai-jun Rondônia           6.224        1
## 3 2012 jul-ago-set Rondônia           5.882        2
## 4 2012 out-nov-dez Rondônia           5.274        2
## 5 2013 jan-fev-mar Rondônia           6.114        1
## 6 2013 abr-mai-jun Rondônia           4.771        1</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">tail</span><span class="p">(</span><span class="n">dados</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##      Ano   Trimestre               UF Taxa_Desemprego Semestre
## 427 2014 jul-ago-set Distrito Federal           8.861        2
## 428 2014 out-nov-dez Distrito Federal           8.708        2
## 429 2015 jan-fev-mar Distrito Federal          10.784        1
## 430 2015 abr-mai-jun Distrito Federal           9.627        1
## 431 2015 jul-ago-set Distrito Federal          10.258        2
## 432 2015 out-nov-dez Distrito Federal           9.707        2</code></pre></div>

<p>Repare que dessa vez estamos usando <code>[ ]</code>. Os colchetes servem para fazermos filtragens “dentro” de um vetor ou um data frame. Mas o que é um vetor? O vetor é um objeto unidimensional. Além disso, ele só aceita um tipo de dado.</p>

<p>Mas o que tem isso tem a ver com o código acima? Bem, quando selecionamos a variável semestre, o objeto resultante não será mais um data.frame, e sim um vetor.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">is.vector</span><span class="p">(</span><span class="n">dados</span><span class="o">$</span><span class="n">Semestre</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<p>Veja que a função <code>is.vector()</code> verifica se o objeto é um vetor. Ou seja, o objeto tem apenas uma dimensão. Isto tem implicações sobre <code>[ ]</code>. Se o objeto possuir duas dimensões, será preciso dizer em qual dimensão você está fazendo a seleção ou filtragem.</p>

<p>As dimensões são separadas por vírgulas. Por exemplo, no caso do data frame, como existem duas dimensões (linhas e colunas) será preciso dizer em qual nós estamos interessados. Por exemplo, teste os seguintes comandos:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Selecionar as 5 primeiras linhas</span>
<span class="n">dados</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="p">]</span>
<span class="c1"># Selecionar as 5 primeiras linhas e as duas primeiras colunas</span>
<span class="n">dados</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">]</span>
<span class="c1"># Selecionar todas as linhas e as duas primeiras colunas</span>
<span class="n">dados</span><span class="p">[,</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">]</span></code></pre></div>

<p>Apesar de ter sido usado apenas números, você pode usar condições e nomes das colunas. Tente o seguinte:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Selecionar as 5 primeiras linhas e a coluna UF e Taxa_Desemprego</span>
<span class="n">dados</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="n">c</span><span class="p">(</span><span class="s2">"UF"</span><span class="p">,</span> <span class="s2">"Taxa_Desemprego"</span><span class="p">)]</span></code></pre></div>

<p>Nesse caso usamos um vetor <code>c()</code> para informar a listagem de nomes de colunas. No próximo post aprofundaremos mais no uso das filtragens de linha e coluna dentro do data frame.</p>

<p>No caso da variável semestre, estamos tratando apenas de uma coluna, portanto teremos um vetor unidimensional, logo, as condições que estão dentro <code>[ ]</code> serão utilizadas para selecionar as posições exatas que receberão o valor da atribuição <code>&lt;-</code>.</p>

<p>Concluindo, vamos usar um exemplo mais complexo. Suponha que você queira criar um data.frame novo apenas com as linhas em que UF é igual a São Paulo e com as colunas <code>Ano</code>, <code>Trimestre</code> e <code>Taxa_Desemprego</code>. Para isto, você irá fazer uma filtragem em um data frame (duas dimensões) e atribuir o resultado para uma variável nova <code>SP</code>:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">SP</span> <span class="o">&lt;-</span> <span class="n">dados</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">UF</span> <span class="o">==</span> <span class="s2">"São Paulo"</span><span class="p">,</span> <span class="n">c</span><span class="p">(</span><span class="s2">"Ano"</span><span class="p">,</span> <span class="s2">"Trimestre"</span><span class="p">,</span> <span class="s2">"Taxa_Desemprego"</span><span class="p">)]</span>
<span class="n">head</span><span class="p">(</span><span class="n">SP</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##      Ano   Trimestre Taxa_Desemprego
## 305 2012 jan-fev-mar           7.792
## 306 2012 abr-mai-jun           7.524
## 307 2012 jul-ago-set           6.889
## 308 2012 out-nov-dez           6.754
## 309 2013 jan-fev-mar           7.718
## 310 2013 abr-mai-jun           7.405</code></pre></div>

<h3 id="logical">Logical</h3>

<p>Quando falamos de filtragens, necessariamente falamos também de operadores lógicos. Operações lógicas são operações comparativas que respondem um tipo específico de dados, os tipos lógicos(booleanos): TRUE (verdadeiro) ou FALSE (falso). Tente <code>class(TRUE)</code> ou <code>class(FALSE)</code>.</p>

<p>Faça um pequeno experimento com o que tem dentro dos colchetes. Digite o seguinte comando:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dados</span><span class="o">$</span><span class="n">Trimestre</span> <span class="o">==</span> <span class="s1">'jan-fev-mar'</span> <span class="o">|</span> <span class="n">dados</span><span class="o">$</span><span class="n">Trimestre</span> <span class="o">==</span> <span class="s1">'abr-mai-jun'</span></code></pre></div>

<p>O R faz essa comparação em todas as linhas e te retorna dizendo exatamente em quais linhas essa condição é verdadeira ou falsa. Esse comando vai retornar verdadeiro para todas as linhas em que trimestre for igual à <code>jan-fev-mar</code> <strong>OU</strong> for igual a <code>abr-mai-jun</code>.</p>

<p>Para entender melhor, segue alguns operadores lógicos e seus significados:</p>

<ul>
  <li><code>==</code> igual a: compara dois objetos e se forem iguais, retorna TRUE, caso contrário, FALSE;</li>
  <li><code>!=</code> diferente: compara dois objetos e se forem diferentes, retorna TRUE, caso contrário, FALSE;</li>
  <li><code>|</code> ou (or): compara dois objetos, se um dos dois for TRUE, retorna TRUE, se os dois forem FALSE, retorna FALSE;</li>
  <li><code>&amp;</code> e (and): compara dois objetos, se os dois forem TRUE, retorna TRUE, se um dos dois ou os dois forem FALSE, retorna FALSE;</li>
  <li><code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code> maior, maior ou igual, menor, menor ou igual: compara grandeza de dois números e retorna TRUE ou FALSE conforme a condição;</li>
</ul>

<p>Segue alguns exemplos para entender os operadores lógicos:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">5</span> <span class="o">&lt;=</span> <span class="m">4</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] FALSE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">5</span> <span class="o">&lt;=</span> <span class="m">5</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">5</span> <span class="o">&lt;=</span> <span class="m">6</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">5</span> <span class="o">&lt;</span> <span class="m">5</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] FALSE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">(</span><span class="m">5</span> <span class="o">&lt;</span> <span class="m">6</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="m">5</span> <span class="o">&lt;</span> <span class="m">3</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">(</span><span class="m">5</span> <span class="o">&lt;</span> <span class="m">6</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="m">5</span> <span class="o">&lt;</span> <span class="m">3</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] FALSE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">2</span> <span class="o">!=</span> <span class="m">1</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">2</span> <span class="o">==</span> <span class="m">1</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] FALSE</code></pre></div>

<p>Ao longo dos próximos posts vamos trabalhar melhor os operadores lógicos e as filtragens, aos poucos o uso ficará intuitivo.</p>

<p>Seguindo com as transformações, vamos supor também que, além de analisar o desemprego por UF, que estão explícitos na variável <code>dados$UF</code>, queremos também analisar o desemprego por Região (Norte, Sul, Nordeste, Centro Oeste e Sudeste):</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dados</span><span class="o">$</span><span class="n">Regiao</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">UF</span> <span class="o">%</span><span class="k">in</span><span class="o">%</span> <span class="n">c</span><span class="p">(</span><span class="s1">'Rondônia'</span><span class="p">,</span> <span class="s1">'Acre'</span><span class="p">,</span> <span class="s1">'Amazonas'</span><span class="p">,</span> <span class="s1">'Roraima'</span><span class="p">,</span> <span class="s1">'Pará'</span><span class="p">,</span> <span class="s1">'Amapá'</span><span class="p">,</span> <span class="s1">'Tocantins'</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s1">'Norte'</span> 
<span class="n">dados</span><span class="o">$</span><span class="n">Regiao</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">UF</span> <span class="o">%</span><span class="k">in</span><span class="o">%</span> <span class="n">c</span><span class="p">(</span><span class="s1">'Maranhão'</span><span class="p">,</span> <span class="s1">'Piauí'</span><span class="p">,</span> <span class="s1">'Ceará'</span><span class="p">,</span> <span class="s1">'Rio Grande do Norte'</span><span class="p">,</span> <span class="s1">'Paraíba'</span><span class="p">,</span> <span class="s1">'Pernambuco'</span><span class="p">,</span> <span class="s1">'Alagoas'</span><span class="p">,</span> <span class="s1">'Sergipe'</span><span class="p">,</span> <span class="s1">'Bahia'</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s1">'Nordeste'</span> 
<span class="n">dados</span><span class="o">$</span><span class="n">Regiao</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">UF</span> <span class="o">%</span><span class="k">in</span><span class="o">%</span> <span class="n">c</span><span class="p">(</span><span class="s1">'Minas Gerais'</span><span class="p">,</span> <span class="s1">'Espírito Santo'</span><span class="p">,</span> <span class="s1">'Rio de Janeiro'</span><span class="p">,</span> <span class="s1">'São Paulo'</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s1">'Sudeste'</span>   
<span class="n">dados</span><span class="o">$</span><span class="n">Regiao</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">UF</span> <span class="o">%</span><span class="k">in</span><span class="o">%</span> <span class="n">c</span><span class="p">(</span><span class="s1">'Paraná'</span><span class="p">,</span> <span class="s1">'Santa Catarina'</span><span class="p">,</span> <span class="s1">'Rio Grande do Sul'</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s1">'Sul'</span>
<span class="n">dados</span><span class="o">$</span><span class="n">Regiao</span><span class="p">[</span><span class="n">dados</span><span class="o">$</span><span class="n">UF</span> <span class="o">%</span><span class="k">in</span><span class="o">%</span> <span class="n">c</span><span class="p">(</span><span class="s1">'Mato Grosso do Sul'</span><span class="p">,</span> <span class="s1">'Mato Grosso Goiás'</span><span class="p">,</span> <span class="s1">'Distrito Federal'</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s1">'Centro Oeste'</span>
<span class="n">head</span><span class="p">(</span><span class="n">dados</span><span class="p">,</span> <span class="m">15</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##     Ano   Trimestre       UF Taxa_Desemprego Semestre Regiao
## 1  2012 jan-fev-mar Rondônia           8.008        1  Norte
## 2  2012 abr-mai-jun Rondônia           6.224        1  Norte
## 3  2012 jul-ago-set Rondônia           5.882        2  Norte
## 4  2012 out-nov-dez Rondônia           5.274        2  Norte
## 5  2013 jan-fev-mar Rondônia           6.114        1  Norte
## 6  2013 abr-mai-jun Rondônia           4.771        1  Norte
## 7  2013 jul-ago-set Rondônia           4.534        2  Norte
## 8  2013 out-nov-dez Rondônia           4.902        2  Norte
## 9  2014 jan-fev-mar Rondônia           4.917        1  Norte
## 10 2014 abr-mai-jun Rondônia           4.112        1  Norte
## 11 2014 jul-ago-set Rondônia           4.111        2  Norte
## 12 2014 out-nov-dez Rondônia           3.575        2  Norte
## 13 2015 jan-fev-mar Rondônia           4.396        1  Norte
## 14 2015 abr-mai-jun Rondônia           4.919        1  Norte
## 15 2015 jul-ago-set Rondônia           6.679        2  Norte</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">tail</span><span class="p">(</span><span class="n">dados</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##      Ano   Trimestre               UF Taxa_Desemprego Semestre
## 427 2014 jul-ago-set Distrito Federal           8.861        2
## 428 2014 out-nov-dez Distrito Federal           8.708        2
## 429 2015 jan-fev-mar Distrito Federal          10.784        1
## 430 2015 abr-mai-jun Distrito Federal           9.627        1
## 431 2015 jul-ago-set Distrito Federal          10.258        2
## 432 2015 out-nov-dez Distrito Federal           9.707        2
##           Regiao
## 427 Centro Oeste
## 428 Centro Oeste
## 429 Centro Oeste
## 430 Centro Oeste
## 431 Centro Oeste
## 432 Centro Oeste</code></pre></div>

<p>Novamente estamos usando os colchetes para fazer uma filtragem e atribuir <code>Norte</code>, <code>Nordeste</code>, <code>Sudeste</code>, <code>Sul</code> e <code>Centro Oeste</code> apenas às linhas específicas em que o filtro dentro dos colchetes retorne <code>TRUE</code>.</p>

<p>Nesse caso estamos usando o operador <code>%in%</code>, que faz uma comparação para ver se o objeto está dentro de uma listagem (vetor) de outros objetos. Nas linhas em que <code>dados$UF</code> estiver “dentro” da listagem de UFs, o filtro retornará TRUE e a atribuição da variável será feita, caso contrário retornará FALSE e não vai atribuir o valor à <code>dados$Regiao</code>.</p>

<p>Para finalizar os exemplos de transformações, vamos tentar uma abordagem com funções matemáticas. Imagine que sua equipe está planejando estimar um modelo com base nesses dados e por algum motivo específico surgiu a necessidade de usar o logaritmo da taxa de desemprego. Não é uma informações explícita mas certamente podemos produzir com o que já temos.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dados</span><span class="o">$</span><span class="n">Log_Taxa_Desemprego</span> <span class="o">&lt;-</span> <span class="n">log</span><span class="p">(</span><span class="n">dados</span><span class="o">$</span><span class="n">Taxa_Desemprego</span><span class="p">)</span>
<span class="n">head</span><span class="p">(</span><span class="n">dados</span><span class="p">,</span> <span class="m">15</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##     Ano   Trimestre       UF Taxa_Desemprego Semestre Regiao
## 1  2012 jan-fev-mar Rondônia           8.008        1  Norte
## 2  2012 abr-mai-jun Rondônia           6.224        1  Norte
## 3  2012 jul-ago-set Rondônia           5.882        2  Norte
## 4  2012 out-nov-dez Rondônia           5.274        2  Norte
## 5  2013 jan-fev-mar Rondônia           6.114        1  Norte
## 6  2013 abr-mai-jun Rondônia           4.771        1  Norte
## 7  2013 jul-ago-set Rondônia           4.534        2  Norte
## 8  2013 out-nov-dez Rondônia           4.902        2  Norte
## 9  2014 jan-fev-mar Rondônia           4.917        1  Norte
## 10 2014 abr-mai-jun Rondônia           4.112        1  Norte
## 11 2014 jul-ago-set Rondônia           4.111        2  Norte
## 12 2014 out-nov-dez Rondônia           3.575        2  Norte
## 13 2015 jan-fev-mar Rondônia           4.396        1  Norte
## 14 2015 abr-mai-jun Rondônia           4.919        1  Norte
## 15 2015 jul-ago-set Rondônia           6.679        2  Norte
##    Log_Taxa_Desemprego
## 1             2.080441
## 2             1.828413
## 3             1.771897
## 4             1.662789
## 5             1.810581
## 6             1.562556
## 7             1.511605
## 8             1.589643
## 9             1.592699
## 10            1.413910
## 11            1.413666
## 12            1.273965
## 13            1.480695
## 14            1.593105
## 15            1.898968</code></pre></div>

<p>Estamos criando uma novas variável em nosso data frame, armazenando o <code>log()</code> na nova variável <code>Log_Taxa_Desemprego</code> em nosso data frame.</p>

<p>A função será aplicada a todas as linhas do data frame, pois não estamos usando nenhum filtro. Em cada linha será usado o valor do campo <code>Taxa_Desemprego</code> como parâmetro da função.</p>

<h1 id="desafio">Desafio</h1>

<p>Apenas para treinar, tente criar uma variável nesse data frame para classificar a taxa de desemprego em <code>alta</code>, <code>média</code> ou <code>baixa</code>, com o critério que quiser. Crie também uma variável armazenando a raiz quadrada da taxa de desemprego.</p>

<p>Muitas outras transformações são possíveis com essa simples base de dados usando atribuição com filtros e funções matemáticas. Consegue imaginar outras transformações? Deixe um comentário sobre os resultados que conseguiu!</p>

<h1 id="referncias">Referências:</h1>

<ul>
  <li><a href="http://www.cyclismo.org/tutorial/R/types.html">Basic Data Types</a></li>
  <li><a href="http://www.r-tutor.com/r-introduction/basic-data-types">Basic Data Types II</a></li>
  <li><a href="http://www.computerworld.com/article/2486425/business-intelligence/business-intelligence-4-data-wrangling-tasks-in-r-for-advanced-beginners.html">4 data wrangling tasks in R for advanced beginners</a></li>
</ul>

</div>


  <p class="meta" style="text-align:center">
    <i>Tem alguma dúvida, crítica ou sugestão? Deixe o seu comentário! Ficaremos felizes em ajudar.<i>
  </p>
  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Postado por <span class="fn">Full Join</span></span>

      




<time class='entry-date' datetime='2016-04-21T19:00:00-03:00'><span class='date'>21/04/2016</span> <span class='time'>7:00 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/basico/'>básico</a>, <a class='category' href='/blog/categories/introducao-r/'>introdução r</a>, <a class='category' href='/blog/categories/r/'>r</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://fulljoin.com.br/blog/2016/04/21/kit-de-sobrevivencia-em-r-parte-5/" data-via="" data-counturl="http://fulljoin.com.br/blog/2016/04/21/kit-de-sobrevivencia-em-r-parte-5/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/04/12/kit-de-sobrevivencia-em-r-parte-4/" title="Previous Post: Kit de sobrevivência em R - Parte 4: Carregando Dados">&laquo; Kit de sobrevivência em R - Parte 4: Carregando Dados</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comentários</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/04/21/kit-de-sobrevivencia-em-r-parte-5/">Kit De Sobrevivência Em R - Parte 5: Tipos De Dados E Transformações</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/12/kit-de-sobrevivencia-em-r-parte-4/">Kit De Sobrevivência Em R - Parte 4: Carregando Dados</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/03/kit-de-sobrevivencia-em-r-parte-3/">Kit De Sobrevivência Em R - Parte 3: Pacotes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/03/kit-de-sobrevivencia-em-r-parte-2/">Kit De Sobrevivência Em R - Parte 2: Operações, Variáveis E Funções</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/23/kit-de-sobrevivencia-em-r-parte-1/">Kit De Sobrevivência Em R - Parte 1: Visão Geral E Instalação</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Full Join -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'fulljoin';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://fulljoin.com.br/blog/2016/04/21/kit-de-sobrevivencia-em-r-parte-5/';
        var disqus_url = 'http://fulljoin.com.br/blog/2016/04/21/kit-de-sobrevivencia-em-r-parte-5/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





<script>
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
		$(this).attr('target', '_blank');
	});
}

$(document).bind('DOMNodeInserted', function(event) {
	addBlankTargetForLinks();
});
</script>

</body>
</html>
